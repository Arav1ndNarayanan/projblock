<head>
	 <meta charset="utf-8">
  <title>DocBlock</title>
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- Font-->
  <link rel="stylesheet" type="text/css" href="css/montserrat-font.css">
  <link rel="stylesheet" type="text/css" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
  <!-- Main Style Css -->
    <link rel="stylesheet" href="css/style.css"/>

    <script src="web3.js"></script>
    <script src="jquery.min.js"></script>
    <script src="jquery-migrate-1.4.1.min.js"></script>
</head>

<body class="form-v10">
  <div class="page-content">
    <div class="form-v10-content">
      <form class="form-detail" action="#" method="post" id="myform">
        <div class="form-left">
          <h2>DocBlock</h2>
         
            <input type="text" id="l1">  
            <input type="text" id="l2">  
            <input type="text" id="l3">  
            <input type="text" id="l4">  
            <input type="text" id="l5">  
            <input type="text" id="l6">  
            <input type="text" id="l7">  

           </div>
      </form>
    </div>
  </div>
      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
  
</body>
<script>

  const provider = new Web3.providers.HttpProvider('http://127.0.0.1:8545')  
const web3 = new Web3(provider); 
address_1 = "0x65c85525d1e1A359077FC5e6BdE0E85B8C03CCf6"
abi_1 =  [
  {
    "constant": true,
    "inputs": [],
    "name": "reg_getname",
    "outputs": [
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      }
    ],
    "payable": false,
    "stateMutability": "view",
    "type": "function"
  },
  {
    "constant": false,
    "inputs": [
      {
        "name": "fn",
        "type": "string"
      },
      {
        "name": "lame",
        "type": "string"
      },
      {
        "name": "rn",
        "type": "string"
      },
      {
        "name": "mod",
        "type": "string"
      },
      {
        "name": "chno",
        "type": "string"
      },
      {
        "name": "adds",
        "type": "string"
      },
      {
        "name": "pin",
        "type": "string"
      }
    ],
    "name": "reg_setname",
    "outputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "constructor"
  }
]
address_2 = "0x1816b25C4F8A0F32676d4617fB80db043cf2b099"
abi_2 = [
  {
    "constant": false,
    "inputs": [
      {
        "name": "fn",
        "type": "string"
      },
      {
        "name": "lame",
        "type": "string"
      },
      {
        "name": "rn",
        "type": "string"
      },
      {
        "name": "mod",
        "type": "string"
      },
      {
        "name": "chno",
        "type": "string"
      },
      {
        "name": "doi",
        "type": "string"
      },
      {
        "name": "doe",
        "type": "string"
      }
    ],
    "name": "insu_setname",
    "outputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "constant": true,
    "inputs": [],
    "name": "insu_getname",
    "outputs": [
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      }
    ],
    "payable": false,
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "constructor"
  }
]
address_3 = "0xDd8509ae0F80fC287BF8ee63829ddC91060DE086"
abi_3 = [
  {
    "constant": true,
    "inputs": [],
    "name": "pol_getname",
    "outputs": [
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      },
      {
        "name": "",
        "type": "string"
      }
    ],
    "payable": false,
    "stateMutability": "view",
    "type": "function"
  },
  {
    "constant": false,
    "inputs": [
      {
        "name": "fn",
        "type": "string"
      },
      {
        "name": "lame",
        "type": "string"
      },
      {
        "name": "rn",
        "type": "string"
      },
      {
        "name": "mod",
        "type": "string"
      },
      {
        "name": "chno",
        "type": "string"
      },
      {
        "name": "doi",
        "type": "string"
      },
      {
        "name": "doe",
        "type": "string"
      }
    ],
    "name": "pol_setname",
    "outputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "constructor"
  }
]
var contract;
var loc= window.location.href;
var a=loc.indexOf("=");
var b=loc.indexOf("&");
var tx=loc.substring(a+1,b);
alert(tx)
var n = loc.lastIndexOf("=");
var locx=loc.substring(n+1)
alert(locx)
if(tx == "rc"){
  contract = new web3.eth.Contract(abi_1,address_1)
  contract.methods.reg_getname().call().then((res,err)=>{
  if(!err){
    document.getElementById("l1").value = res[0];
    document.getElementById("l2").value = res[1];
    document.getElementById("l3").value = res[2];
    document.getElementById("l4").value = res[3];
    document.getElementById("l5").value = res[4];
    document.getElementById("l6").value = res[5];
    document.getElementById("l7").value = res[6];
    
  }
  else
    alert("Invalid QR code")
})
}
else if(tx == "polu"){
  contract = new web3.eth.Contract(abi_3,address_3)
  contract.methods.pol_getname().call().then((res,err)=>{
  if(!err){
    document.getElementById("l1").value = res[0];
    document.getElementById("l2").value = res[1];
    document.getElementById("l3").value = res[2];
    document.getElementById("l4").value = res[3];
    document.getElementById("l5").value = res[4];
    document.getElementById("l6").value = res[5];
    document.getElementById("l7").value = res[6];
    
  }
  else
    alert("Invalid QR code")
})
}

else if(tx == "ic"){
  contract = new web3.eth.Contract(abi_2,address_2)
  contract.methods.insu_getname().call().then((res,err)=>{
  if(!err){
    document.getElementById("l1").value = res[0];
    document.getElementById("l2").value = res[1];
    document.getElementById("l3").value = res[2];
    document.getElementById("l4").value = res[3];
    document.getElementById("l5").value = res[4];
    document.getElementById("l6").value = res[5];
    document.getElementById("l7").value = res[6];
    
  }
  else
    alert("Invalid QR code")
})
}

else
  alert("Title is not a Valid Choice!!!!!")
  
  
</script>
</html>